:original_name: ListVirtualGateways.html

.. _ListVirtualGateways:

Querying Virtual Gateways
=========================

Function
--------

This API is used to query virtual gateways.

URI
---

GET /v3/{project_id}/dcaas/virtual-gateways

.. table:: **Table 1** Path Parameters

   ========== ========= ====== =========================
   Parameter  Mandatory Type   Description
   ========== ========= ====== =========================
   project_id Yes       String Specifies the project ID.
   ========== ========= ====== =========================

.. table:: **Table 2** Query Parameters

   +-----------------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Mandatory       | Type            | Description                                                                                                                                                                         |
   +=======================+=================+=================+=====================================================================================================================================================================================+
   | limit                 | No              | Integer         | Specifies the number of records returned on each page. Value range: 1 to 2000                                                                                                       |
   |                       |                 |                 |                                                                                                                                                                                     |
   |                       |                 |                 | Minimum: **1**                                                                                                                                                                      |
   |                       |                 |                 |                                                                                                                                                                                     |
   |                       |                 |                 | Maximum: **2000**                                                                                                                                                                   |
   |                       |                 |                 |                                                                                                                                                                                     |
   |                       |                 |                 | Default: **2000**                                                                                                                                                                   |
   +-----------------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | marker                | No              | String          | Specifies the ID of the last resource record on the previous page. If this parameter is left blank, the first page is queried. This parameter must be used together with **limit**. |
   |                       |                 |                 |                                                                                                                                                                                     |
   |                       |                 |                 | Minimum: **0**                                                                                                                                                                      |
   |                       |                 |                 |                                                                                                                                                                                     |
   |                       |                 |                 | Maximum: **36**                                                                                                                                                                     |
   +-----------------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | fields                | No              | Array           | Specifies the list of fields to be displayed.                                                                                                                                       |
   |                       |                 |                 |                                                                                                                                                                                     |
   |                       |                 |                 | Array Length: **1 - 5**                                                                                                                                                             |
   +-----------------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | sort_dir              | No              | Array           | Specifies the sorting order of returned results, which can be **asc** (ascending order) or **desc** (descending order). The default value is **asc**.                               |
   +-----------------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | sort_key              | No              | String          | Specifies the sorting field.                                                                                                                                                        |
   |                       |                 |                 |                                                                                                                                                                                     |
   |                       |                 |                 | Default: **id**                                                                                                                                                                     |
   |                       |                 |                 |                                                                                                                                                                                     |
   |                       |                 |                 | Minimum: **0**                                                                                                                                                                      |
   |                       |                 |                 |                                                                                                                                                                                     |
   |                       |                 |                 | Maximum: **36**                                                                                                                                                                     |
   +-----------------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | id                    | No              | Array           | Specifies the resource ID by which instances are filtered.                                                                                                                          |
   |                       |                 |                 |                                                                                                                                                                                     |
   |                       |                 |                 | Array Length: **1 - 5**                                                                                                                                                             |
   +-----------------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | enterprise_project_id | No              | Array           | Filters resource instances by enterprise project ID.                                                                                                                                |
   |                       |                 |                 |                                                                                                                                                                                     |
   |                       |                 |                 | Array Length: **1 - 10**                                                                                                                                                            |
   +-----------------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | vpc_id                | No              | Array           | Specifies the VPC ID by which virtual gateways are filtered.                                                                                                                        |
   +-----------------------+-----------------+-----------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Request Parameters
------------------

.. table:: **Table 3** Request header parameters

   +-----------------+-----------------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter       | Mandatory       | Type            | Description                                                                                                                                                                                                        |
   +=================+=================+=================+====================================================================================================================================================================================================================+
   | X-Auth-Token    | Yes             | String          | Specifies the user token. To obtain the token, see section "Obtaining the User Token" in the *Identity and Access Management API Reference*. The token is the value of **X-Subject-Token** in the response header. |
   |                 |                 |                 |                                                                                                                                                                                                                    |
   |                 |                 |                 | Minimum: **0**                                                                                                                                                                                                     |
   |                 |                 |                 |                                                                                                                                                                                                                    |
   |                 |                 |                 | Maximum: **10240**                                                                                                                                                                                                 |
   +-----------------+-----------------+-----------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Response Parameters
-------------------

**Status code: 200**

.. table:: **Table 4** Response body parameters

   +------------------+--------------------------------------------------------------------------------------------------------------------+------------------------------------------------------+
   | Parameter        | Type                                                                                                               | Description                                          |
   +==================+====================================================================================================================+======================================================+
   | request_id       | String                                                                                                             | Specifies the request ID.                            |
   +------------------+--------------------------------------------------------------------------------------------------------------------+------------------------------------------------------+
   | virtual_gateways | Array of :ref:`VirtualGateway <listvirtualgateways__en-us_topic_0000001735825664_response_virtualgateway>` objects | Specifies parameters for creating a virtual gateway. |
   +------------------+--------------------------------------------------------------------------------------------------------------------+------------------------------------------------------+
   | page_info        | :ref:`PageInfo <listvirtualgateways__en-us_topic_0000001735825664_response_pageinfo>` object                       | Specifies the pagination query information.          |
   +------------------+--------------------------------------------------------------------------------------------------------------------+------------------------------------------------------+

.. _listvirtualgateways__en-us_topic_0000001735825664_response_virtualgateway:

.. table:: **Table 5** VirtualGateway

   +-----------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                                                                                                                   |
   +=======================+=======================+===============================================================================================================================================================+
   | id                    | String                | Specifies the virtual gateway ID.                                                                                                                             |
   +-----------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | vpc_id                | String                | Specifies the ID of the VPC connected by the virtual gateway.                                                                                                 |
   +-----------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | enterprise_router_id  | String                | Specifies the ID of the enterprise router that the virtual gateway is attached to.                                                                            |
   +-----------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | tenant_id             | String                | Specifies the ID of the project that the instance belongs to.                                                                                                 |
   |                       |                       |                                                                                                                                                               |
   |                       |                       | Minimum: **32**                                                                                                                                               |
   |                       |                       |                                                                                                                                                               |
   |                       |                       | Maximum: **32**                                                                                                                                               |
   +-----------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | name                  | String                | Specifies the virtual gateway name.                                                                                                                           |
   |                       |                       |                                                                                                                                                               |
   |                       |                       | Minimum: **0**                                                                                                                                                |
   |                       |                       |                                                                                                                                                               |
   |                       |                       | Maximum: **64**                                                                                                                                               |
   +-----------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | description           | String                | Provides supplementary information about the virtual gateway.                                                                                                 |
   |                       |                       |                                                                                                                                                               |
   |                       |                       | Minimum: **0**                                                                                                                                                |
   |                       |                       |                                                                                                                                                               |
   |                       |                       | Maximum: **128**                                                                                                                                              |
   +-----------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | type                  | String                | Specifies the virtual gateway type. The value can only be **default**.                                                                                        |
   |                       |                       |                                                                                                                                                               |
   |                       |                       | Default: **default**                                                                                                                                          |
   +-----------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | local_ep_group        | Array of strings      | Specifies the IPv4 subnets connected by the virtual gateway, which is usually the CIDR blocks of a VPC.                                                       |
   +-----------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | local_ep_group_ipv6   | Array of strings      | Specifies the IPv6 subnets connected by the virtual gateway, which is usually the CIDR blocks of a VPC. This is a reserved field.                             |
   +-----------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | admin_state_up        | Boolean               | Specifies the administrative status, which can be **true** or **false**.                                                                                      |
   |                       |                       |                                                                                                                                                               |
   |                       |                       | Default: **true**                                                                                                                                             |
   +-----------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | status                | String                | Specifies the virtual gateway status, which can be **ACTIVE**, **DOWN**, **BUILD**, **ERROR**, **PENDING_CREATE**, **PENDING_UPDATE**, or **PENDING_DELETE**. |
   +-----------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | bgp_asn               | Integer               | Specifies the local BGP ASN of the virtual gateway.                                                                                                           |
   |                       |                       |                                                                                                                                                               |
   |                       |                       | Minimum: **1**                                                                                                                                                |
   |                       |                       |                                                                                                                                                               |
   |                       |                       | Maximum: **4294967295**                                                                                                                                       |
   +-----------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | enterprise_project_id | String                | Specifies the ID of the enterprise project that the virtual gateway belongs to.                                                                               |
   |                       |                       |                                                                                                                                                               |
   |                       |                       | Minimum: **36**                                                                                                                                               |
   |                       |                       |                                                                                                                                                               |
   |                       |                       | Maximum: **36**                                                                                                                                               |
   +-----------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | device_id             | String                | Specifies the ID of the device that the virtual interface belongs to.                                                                                         |
   +-----------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | redundant_device_id   | String                | Specifies the ID of the redundant device.                                                                                                                     |
   +-----------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | public_border_group   | String                | Specifies the public border group of the AZ, indicating whether the site is a HomeZones site.                                                                 |
   +-----------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _listvirtualgateways__en-us_topic_0000001735825664_response_pageinfo:

.. table:: **Table 6** PageInfo

   +-----------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------+
   | Parameter             | Type                  | Description                                                                                                                     |
   +=======================+=======================+=================================================================================================================================+
   | previous_marker       | String                | Specifies the marker of the previous page. The value is the resource UUID.                                                      |
   |                       |                       |                                                                                                                                 |
   |                       |                       | Minimum: **0**                                                                                                                  |
   |                       |                       |                                                                                                                                 |
   |                       |                       | Maximum: **36**                                                                                                                 |
   +-----------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------+
   | current_count         | Integer               | Specifies the number of resources in the current list.                                                                          |
   |                       |                       |                                                                                                                                 |
   |                       |                       | Minimum: **0**                                                                                                                  |
   |                       |                       |                                                                                                                                 |
   |                       |                       | Maximum: **2000**                                                                                                               |
   +-----------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------+
   | next_marker           | String                | Specifies the marker of the next page. The value is the resource UUID. If the value is empty, the resource is on the last page. |
   |                       |                       |                                                                                                                                 |
   |                       |                       | Minimum: **0**                                                                                                                  |
   |                       |                       |                                                                                                                                 |
   |                       |                       | Maximum: **36**                                                                                                                 |
   +-----------------------+-----------------------+---------------------------------------------------------------------------------------------------------------------------------+

Example Requests
----------------

Querying the virtual gateway list

.. code-block:: text

   GET https://{dc_endpoint}/v3/0605768a3300d5762f82c01180692873/dcaas/virtual-gateways

Example Responses
-----------------

**Status code: 200**

OK

-  The list of virtual gateways associated with VPCs is queried.

   .. code-block::

      {
        "virtual_gateways" : [ {
          "id" : "20082c1b-3c99-48d8-8e8c-116af5d7e9f0",
          "name" : "vgw-c7b22",
          "description" : "",
          "tenant_id" : "0605768a3300d5762f82c01180692873",
          "vpc_id" : "6592c28e-95d7-4b0a-9f61-004fdf03420c",
          "device_id" : "26.151.63.100",
          "redundant_device_id" : "26.152.128.20",
          "type" : "default",
          "status" : "ACTIVE",
          "admin_state_up" : true,
          "bgp_asn" : 64512,
          "local_ep_group" : [ "192.168.1.0/24" ],
          "enterprise_project_id" : "0",
          "public_border_group" : "center"
        } ],
        "request_id" : "765f7aaf8f2edd0e719de564ef72e2de"
      }

-  The list of virtual gateways attached to enterprise routers is queried.

   .. code-block::

      {
        "virtual_gateways" : [ {
          "name" : "vgw-er",
          "id" : "7a91797a-cbda-42ff-9f42-73f26c993dd9",
          "description" : "",
          "tenant_id" : "92ea72fe26294aa180a2712c28e43c21",
          "vpc_id" : null,
          "enterprise_router_id" : "61fa53c9-4446-4ebd-89b9-11a52b653a9c",
          "device_id" : "26.151.63.100",
          "redundant_device_id" : "26.152.128.20",
          "type" : "default",
          "status" : "ACTIVE",
          "admin_state_up" : true,
          "bgp_asn" : 64512,
          "local_ep_group" : null,
          "local_ep_group_ipv6" : null,
          "public_border_group" : null
        } ],
        "request_id" : "765f7aaf8f2edd0e719de564e6174dfa"
      }

Status Codes
------------

=========== ===========
Status Code Description
=========== ===========
200         OK
=========== ===========

Error Codes
-----------

See :ref:`Error Codes <errorcode>`.
